<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ملتقى تلبية التعريفي</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" data-presets="env,react"></script>
  <style>
    :root { --green:#1B6734 }
    body { font-family:'Tajawal', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif }
    html { scroll-behavior: smooth }
    .glass { background:rgba(255,255,255,.7); backdrop-filter:blur(8px) }
    .ribbon { background:linear-gradient(90deg,#eafff3,#ffffff) }
  </style>
</head>
<body class="bg-white text-gray-900">
  <div id="root"></div>

<script type="text/babel">
/* إعدادات عامة */
const PHONE = '0507208120';
const PDF_FILE = 'ملتقى تلبية حائل.pdf'; // ارفع الملف بجانب index.html إن رغبت إظهاره

/* شعارات الهوية (روابط عامة حيادية مؤقتًا) */
const LOGO_TAL = 'https://raw.githubusercontent.com/hasseef/Talbiya_-Forum/main/assets/talbiya.png';
const LOGO_VIS = 'https://raw.githubusercontent.com/hasseef/Talbiya_-Forum/main/assets/Vision2030.png';
const LOGO_HAS = 'https://raw.githubusercontent.com/hasseef/Talbiya_-Forum/main/assets/hasseef.png';

/* شعارات الإمارات (سيتم استبدالها لاحقًا كـ Data URI مدمجة داخل الملف) */
const EMIRATE_LOGOS = {
  'riyadh'           : { src:'https://iconape.com/wp-content/files/kl/386519/svg/386519.svg',  name:'إمارة منطقة الرياض' },
  'makkah'           : { src:'', name:'إمارة منطقة مكة المكرمة' },
  'madinah'          : { src:'', name:'إمارة منطقة المدينة المنورة' },
  'qassim'           : { src:'', name:'إمارة منطقة القصيم' },
  'eastern'          : { src:'', name:'إمارة المنطقة الشرقية' },
  'aseer'            : { src:'', name:'إمارة منطقة عسير' },
  'tabuk'            : { src:'', name:'إمارة منطقة تبوك' },
  'hail'             : { src:'', name:'إمارة منطقة حائل' },
  'northern-borders' : { src:'', name:'إمارة منطقة الحدود الشمالية' },
  'jazan'            : { src:'', name:'إمارة منطقة جازان' },
  'najran'           : { src:'', name:'إمارة منطقة نجران' },
  'albaha'           : { src:'', name:'إمارة منطقة الباحة' },
  'aljouf'           : { src:'', name:'إمارة منطقة الجوف' },
};

const STORAGE_KEY = 'talbiya_regions_final_sc';
const DEFAULT_REGIONS = [
  {id:'riyadh', name:'الرياض', date:'11 يناير 2026م', venue:'مركز الرياض الدولي للمؤتمرات والمعارض'},
  {id:'makkah', name:'مكة المكرمة', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'madinah', name:'المدينة المنورة', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'qassim', name:'القصيم', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'eastern', name:'الشرقية', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'aseer', name:'عسير', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'tabuk', name:'تبوك', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'hail', name:'حائل', date:'11 يناير 2026م', venue:'مركز معارض حائل — القاعة الرئيسية'},
  {id:'northern-borders', name:'الحدود الشمالية', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'jazan', name:'جازان', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'najran', name:'نجران', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'albaha', name:'الباحة', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
  {id:'aljouf', name:'الجوف', date:'11 يناير 2026م', venue:'يُحدد لاحقًا'},
];

const loadRegions = ()=>{ try{const raw=localStorage.getItem(STORAGE_KEY); return raw? JSON.parse(raw) : DEFAULT_REGIONS;} catch {return DEFAULT_REGIONS;} };
const slug = (t)=> (t||'').toString().trim().replace(/\s+/g,'-').toLowerCase() || 'venue';
const buildLink=(id,venue)=>{const u=new URL(location.href);u.searchParams.set('region',id);u.searchParams.set('venue',slug(venue));return u.toString()}

const PlaceholderLogo = ({name}) => (
  <div className="h-7 px-3 flex items-center justify-center rounded border text-[12px] text-emerald-700 bg-white">{name}</div>
);

function Ribbon({activeId, regionName}){
  const em = EMIRATE_LOGOS[activeId];
  if(!em) return null;
  return (
    <div className="ribbon border-b">
      <div className="container mx-auto px-4 h-12 flex items-center justify-center gap-3">
        {em.src ? <img src={em.src} className="h-7" alt={em.name}/> : <PlaceholderLogo name={em.name}/>}
        <span className="text-sm md:text-base text-[var(--green)] font-bold">برعاية كريمة من إمارة {regionName}</span>
      </div>
    </div>
  );
}

const IdentityStrip = ()=>(
  <div className="mt-6 flex items-center gap-4 flex-wrap justify-center">
    <img src={LOGO_TAL} className="h-14" alt="Talbiya"/>
    <img src={LOGO_HAS} className="h-12" alt="Hasseef"/>
    <img src={LOGO_VIS} className="h-10" alt="Vision2030"/>
  </div>
);

function About(){
  return (
    <section className="py-10 bg-gradient-to-b from-emerald-50 to-white">
      <div className="container mx-auto px-4 text-center">
        <h1 className="text-3xl lg:text-4xl font-extrabold mb-3">ملتقى تلبية التعريفي</h1>
        <p className="text-gray-700 mb-6">
          فعالية تعريفية بمبادرة تلبية ومشروعها «حصيف» بالشراكة مع إمارة المنطقة، مع معرض مصاحب للمشاريع وورش عمل — لمدة يومين.
        </p>
        <div className="flex flex-wrap items-center justify-center gap-3">
          <a href="#register" className="px-5 py-3 rounded-xl bg-[var(--green)] text-white">سجّل حضورك</a>
          <a href="#cfp" className="px-5 py-3 rounded-xl border">قدّم كمُتحدث/مدرّب</a>
          <a href="#sponsor" className="px-5 py-3 rounded-xl border">الرعايات</a>
        </div>
        <IdentityStrip/>
      </div>
    </section>
  );
}

function RegionCard({region}){
  if(!region) return null;
  const link=buildLink(region.id, region.venue);
  return (
    <section className="py-8">
      <div className="container mx-auto px-4">
        <h2 className="text-3xl font-bold text-[var(--green)] mb-3">ملتقى تلبية — {region.name}</h2>
        <p className="mb-1"><b>التاريخ:</b> {region.date}</p>
        <p className="mb-6"><b>المكان:</b> {region.venue}</p>
        <div className="flex flex-wrap items-center gap-3">
          <a href={link} className="px-4 py-2 rounded-xl border">فتح الرابط الخاص بالمنطقة</a>
          <button className="px-4 py-2 rounded-xl bg-[var(--green)] text-white" onClick={()=>navigator.clipboard?.writeText(link)}>نسخ رابط الملتقى</button>
        </div>
      </div>
    </section>
  );
}

function Agenda(){
  const items=[
    {day:'اليوم الأول', sessions:['الافتتاح والشراكات مع إمارة المنطقة','جلسة: دور مبادرة تلبية في تمكين الحلول','جلسة: التعريف بمشروع منصة حصيف']},
    {day:'اليوم الثاني', sessions:['حلقة نقاش: فرص الرعاية والمسؤولية الاجتماعية','ورشة: تصميم مبادرات مجتمعية فعّالة','ورش تطبيقية للمشاريع المشاركة']}
  ];
  return (
    <section id="agenda" className="py-14 bg-white">
      <div className="container mx-auto px-4">
        <h3 className="text-2xl font-bold mb-6 text-center">البرنامج</h3>
        <div className="grid md:grid-cols-2 gap-6">
          {items.map((d,i)=>(
            <div key={i} className="glass border rounded-2xl p-6">
              <div className="font-extrabold text-[var(--green)] mb-3">{d.day}</div>
              <ul className="list-disc pr-6 text-gray-700 space-y-2">
                {d.sessions.map((s,idx)=>(<li key={idx}>{s}</li>))}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}

/* النماذج */
function mailto(id, payload){
  const subject = encodeURIComponent('طلب عبر موقع ملتقى تلبية — ' + id);
  const body = encodeURIComponent(Object.entries(payload).map(([k,v])=> `${k}: ${v}`).join('\n'));
  location.href = `mailto:info@talbiya.sa?subject=${subject}&body=${body}`;
}

function SponsorForm(){
  return (
    <section id="sponsor" className="py-14 bg-gray-50">
      <div className="container mx-auto px-4">
        <h3 className="text-2xl font-bold mb-6 text-center">الرعايات</h3>
        <form className="glass border rounded-2xl p-6 max-w-3xl mx-auto" onSubmit={(e)=>{e.preventDefault(); const f=e.target; mailto('sponsor', {'اسم الجهة': f.org.value,'السجل التجاري/الترخيص': f.cr.value,'الشخص المسؤول': f.contact.value,'البريد': f.email.value,'الجوال': f.phone.value,'باقة الرعاية': f.tier.value,'روابط حسابات': f.links.value,'ملاحظات': f.notes.value});}}>
          <div className="grid sm:grid-cols-2 gap-3">
            <input name="org" className="w-full border rounded-xl px-3 py-2" placeholder="اسم الجهة" required />
            <input name="cr"  className="w-full border rounded-xl px-3 py-2" placeholder="السجل التجاري/الترخيص" />
            <input name="contact" className="w-full border rounded-xl px-3 py-2" placeholder="الشخص المسؤول" required />
            <input name="email" type="email" className="w-full border rounded-xl px-3 py-2" placeholder="البريد الإلكتروني" required />
            <input name="phone" className="w-full border rounded-xl px-3 py-2" placeholder="الجوال" />
            <select name="tier" className="w-full border rounded-xl px-3 py-2" defaultValue="" required>
              <option value="" disabled>اختر باقة الرعاية</option>
              <option>شريك استراتيجي</option><option>راعي ماسي</option><option>ذهبي</option><option>فضي</option>
            </select>
          </div>
          <input name="links" className="w-full border rounded-xl px-3 py-2 mt-3" placeholder="روابط الحسابات (اختياري)" />
          <textarea name="notes" className="w-full border rounded-xl px-3 py-2 mt-3" rows="4" placeholder="ملاحظات إضافية"></textarea>
          <button className="w-full mt-4 px-5 py-3 bg-[var(--green)] text-white rounded-xl">إرسال طلب الرعاية</button>
        </form>
      </div>
    </section>
  );
}

function SpeakerCFP(){
  return (
    <section id="cfp" className="py-14 bg-white">
      <div className="container mx-auto px-4">
        <h3 className="text-2xl font-bold mb-6 text-center">تقديم متحدث/مدرّب</h3>
        <form className="glass border rounded-2xl p-6 max-w-3xl mx-auto" onSubmit={(e)=>{e.preventDefault(); const f=e.target; mailto('cfp', {'الاسم': f.fullname.value,'الجهة': f.org.value,'البريد': f.email.value,'الجوال': f.phone.value,'المحور': f.topic.value,'نبذة': f.brief.value});}}>
          <input name="fullname" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="الاسم الكامل" required />
          <input name="org" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="الجهة (اختياري)" />
          <input name="email" type="email" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="البريد الإلكتروني" required />
          <input name="phone" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="الجوال" />
          <select name="topic" className="w-full border rounded-xl px-3 py-2 mb-3" defaultValue="" required>
            <option value="" disabled>المحور المقترح</option>
            <option>الشراكات التنموية</option><option>الابتكار المجتمعي</option><option>التطوع والتمكين</option><option>الاستدامة والمسؤولية الاجتماعية</option>
          </select>
          <textarea name="brief" className="w-full border rounded-xl px-3 py-2 mb-3" rows="5" placeholder="نبذة عن المحتوى المقترح" required></textarea>
          <button className="w-full px-5 py-3 bg-[var(--green)] text-white rounded-xl">إرسال</button>
        </form>
      </div>
    </section>
  );
}

function RegisterExpo(){
  return (
    <section id="register" className="py-14 bg-gray-50">
      <div className="container mx-auto px-4">
        <h3 className="text-2xl font-bold mb-6 text-center">التسجيل والحجوزات</h3>
        <div className="grid md:grid-cols-2 gap-6">
          <form className="glass border rounded-2xl p-6" onSubmit={(e)=>{e.preventDefault(); const f=e.target; mailto('register', {'الاسم': f.fullname.value,'البريد': f.email.value,'الجوال': f.phone.value,'الصفة': f.role.value});}}>
            <div className="font-extrabold text-[var(--green)] mb-3">تسجيل الحضور</div>
            <input name="fullname" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="الاسم الكامل" required />
            <input name="email" type="email" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="البريد الإلكتروني" required />
            <input name="phone" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="الجوال" />
            <select name="role" className="w-full border rounded-xl px-3 py-2 mb-3" defaultValue="" required>
              <option value="" disabled>اختر الصفة</option>
              <option>فرد</option><option>جهة</option><option>متحدث/مدرب</option><option>راعٍ محتمل</option>
            </select>
            <button className="w-full px-5 py-3 bg-[var(--green)] text-white rounded-xl">إرسال</button>
          </form>

          <form className="glass border rounded-2xl p-6" onSubmit={(e)=>{e.preventDefault(); const f=e.target; mailto('expo', {'اسم الجهة/المبادرة': f.org.value,'نوع العارض': f.exhibitor_type.value,'المساحة المطلوبة': f.size.value,'نبذة': f.brief.value,'مسؤول التواصل': f.contact.value,'البريد': f.email.value,'الجوال': f.phone.value});}}>
            <div className="font-extrabold text-[var(--green)] mb-3">طلب جناح في المعرض</div>
            <input name="org" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="اسم الجهة/المبادرة" required />
            <select name="exhibitor_type" className="w-full border rounded-xl px-3 py-2 mb-3" defaultValue="" required>
              <option value="" disabled>نوع العارض</option>
              <option>جهة حكومية</option><option>جهة مانحة</option><option>جامعة</option><option>شركة</option><option>جمعية</option><option>أخرى</option>
            </select>
            <select name="size" className="w-full border rounded-xl px-3 py-2 mb-3" defaultValue="" required>
              <option value="" disabled>المساحة المطلوبة</option>
              <option>3×3 م</option><option>4×4 م</option><option>6×6 م</option>
            </select>
            <textarea name="brief" rows="4" className="w-full border rounded-xl px-3 py-2 mb-3" placeholder="نبذة مختصرة عن المشاركة" required></textarea>
            <div className="grid sm:grid-cols-3 gap-3">
              <input name="contact" className="w-full border rounded-xl px-3 py-2" placeholder="مسؤول التواصل" required />
              <input name="email" type="email" className="w-full border rounded-xl px-3 py-2" placeholder="البريد الإلكتروني" required />
              <input name="phone" className="w-full border rounded-xl px-3 py-2" placeholder="الجوال" />
            </div>
            <button className="w-full mt-4 px-5 py-3 bg-[var(--green)] text-white rounded-xl">إرسال الطلب</button>
          </form>
        </div>
      </div>
    </section>
  );
}

function App(){
  const [regions,setRegions]=React.useState(loadRegions());
  const [activeId,setActiveId]=React.useState(regions[0]?.id||'riyadh');
  const active=regions.find(r=>r.id===activeId);

  React.useEffect(()=>{
    const q=new URLSearchParams(location.search).get('region');
    const loaded=loadRegions(); setRegions(loaded);
    const initial=loaded.find(r=>r.id===q)?.id || loaded[0]?.id || 'riyadh';
    setActiveId(initial);
    document.title='ملتقيات تلبية التعريفية';
  },[]);

  React.useEffect(()=>{
    const r=regions.find(x=>x.id===activeId); if(!r) return;
    const u=new URL(location.href);
    u.searchParams.set('region', activeId);
    u.searchParams.set('venue',  (r.venue||'').toString().trim().replace(/\s+/g,'-').toLowerCase());
    history.replaceState({},'',u);
  },[activeId,regions]);

  return (
    <main>
      <header className="bg-white/85 border-b sticky top-0 z-50">
        <div className="container mx-auto px-4 h-16 flex items-center justify-between">
          <div className="font-extrabold">ملتقيات تلبية التعريفية</div>
          <div className="flex items-center gap-3">
            <label className="text-sm text-gray-600">اختر المنطقة:</label>
            <select value={activeId} onChange={(e)=>setActiveId(e.target.value)} className="rounded-xl border px-3 py-2">
              {regions.map(r=> <option key={r.id} value={r.id}>{r.name}</option>)}
            </select>
          </div>
        </div>
        <Ribbon activeId={activeId} regionName={active?.name||''}/>
      </header>

      <About/>
      <RegionCard region={active}/>
      <Agenda/>
      <SponsorForm/>
      <SpeakerCFP/>
      <RegisterExpo/>

      <footer className="bg-gray-100 border-t py-10 mt-6 text-center">
        <div className="container mx-auto px-4">
          <p className="text-gray-600 text-sm">© {new Date().getFullYear()} مبادرة تلبية — جميع الحقوق محفوظة</p>
          <p className="text-gray-600 text-sm mt-1">للتواصل: {PHONE}</p>
          <div className="mt-3">
            <a href={PDF_FILE} className="px-4 py-2 rounded-xl border" target="_blank">تحميل ملف ملتقى تلبية — حائل (PDF)</a>
          </div>
        </div>
      </footer>
    </main>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
